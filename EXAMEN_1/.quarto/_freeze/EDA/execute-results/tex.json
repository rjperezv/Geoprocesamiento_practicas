{
  "hash": "31719874688fa0900ecbe26aa733e95d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Selección de covariables\"\nformat: html\neditor: visual\n---\n\n\n\n\n\n\n## Selección de variables\n\nAdemás de las covariables recolectadas, también se deben tener en cuenta los datos de campo y su influencia en el estudio. El conjunto de datos cada vez va obteniendo más variables y el procesamiento se puede ver afectado al igual que la interpretación de los datos, algunas ventajas de realizar el manejo de las covariables son las siguientes:\n\n-   **Se evita colinealidad**\n\n    Debido a que los conjuntos de datos a menudo contienen muchas variables. La selección de covariables ayuda a reducir la dimensionalidad, manteniendo solo las variables más importantes. Esto facilita la interpretación y el análisis.\n\n-   **Interpretación más clara**\n\n    Al seleccionar cuidadosamente las covariables, se obtiene un modelo más interpretable. Las variables seleccionadas tienen una relación más directa con la variable de respuesta, lo que facilita la interpretación de los resultados.\n\n-   **Mediciones precisa**\n\n    Al eliminar covariables irrelevantes o redundantes, se mejora la precisión del modelo. Un modelo con menos variables puede generalizar mejor y evitar el sobreajuste. Además, incluir demasiadas covariables puede llevar a sobreajuste del modelo y reducir su poder estadístico.\n\n-   **Eficiencia computacional**\n\n    Menos covariables implican menos cálculos y menos recursos computacionales. Esto es especialmente importante en grandes conjuntos de datos o cuando se aplican algoritmos intensivos en cómputo.\n\n## Preparación covariables\n\nEn esta seccion se recopila la información necesaria y se genera la información raster que sera base del mapeo de la propiedad.cion raster que sera base del mapeo de la propiedad.\n\nSe realiza procedimiento para variables de terreno, climaticas, NDVI, correccion de alturas para establecer las covariables .\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# calculo de variables geomorfologicas\nlibrary(RSAGA)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: gstat\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: plyr\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: shapefiles\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: foreign\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAdjuntando el paquete: 'shapefiles'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:foreign':\n\n    read.dbf, write.dbf\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(raster)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: sp\n```\n\n\n:::\n\n```{.r .cell-code}\nsaga_cmd <- \"C:\\\\Program Files\\\\saga-9.7.2_x64\"\n\nrsaga.set.env(path = saga_cmd)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$workspace\nNULL\n\n$cmd\nNULL\n\n$path\n[1] \"C:\\\\Program Files\\\\saga-9.7.2_x64\"\n\n$modules\nNULL\n\n$version\n[1] NA\n\n$cores\n[1] NA\n\n$parallel\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\n#Calcular pendiente\n\n#profile Curvature\n#Convergence index\n\nenv <- rsaga.env(path = saga_cmd)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nVerify specified path to SAGA command line program...\nFound SAGA command line program. SAGA modules path not specified, looking for it now... \nDone\n```\n\n\n:::\n\n```{.r .cell-code}\n# Imprimir el entorno para verificar la configuración\nprint(env)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$workspace\n[1] \".\"\n\n$cmd\n[1] \"saga_cmd.exe\"\n\n$path\n[1] \"C:\\\\Program Files\\\\saga-9.7.2_x64\"\n\n$modules\n[1] \"C:\\\\Program Files\\\\saga-9.7.2_x64/tools\"\n\n$version\n[1] \"9.7.2\"\n\n$cores\n[1] NA\n\n$parallel\n[1] FALSE\n\n$numeric_version\n[1] 972\n\n$lib.prefix\n[1] \"\"\n```\n\n\n:::\n\n```{.r .cell-code}\n#definir la ruta de archivo raster y el directorio de salida \nDEM_cesar_Magda <- \"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\ZOnaz_cesar_magdalena.tif\"\noutput_dir <- \"D:/DATOX/Agrarias/Pedo/procesos\"\n\n# Función para convertir el archivo .sgrd a GeoTIFF\nconvert_to_geotiff <- function(input_sgrd, output_tiff) {\n  rsaga.geoprocessor(lib = \"io_gdal\", module = \"Export GeoTIFF\",\n                     param = list(GRIDS = input_sgrd, FILE = output_tiff), env = env)\n}\n\n# Calcular la pendiente (Slope) y guardar en GeoTIFF\nslope_sgrd <- file.path(output_dir, \"slope.sgrd\")\nslope_tiff <- file.path(output_dir, \"slope.tif\")\nrsaga.geoprocessor(lib = \"ta_morphometry\", module = \"Slope, Aspect, Curvature\",\n                   param = list(ELEVATION = DEM_cesar_Magda, SLOPE = slope_sgrd), env = env)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\nSAGA Version: 9.7.2 (64 bit)\n\nlibrary path: C:\\PROGRA~1\\SAGA-9~1.2_X\\tools\\\nlibrary name: ta_morphometry\nlibrary     : Morphometry\ntool        : Slope, Aspect, Curvature\nidentifier  : 0\nauthor      : O.Conrad (c) 2001\nprocessors  : 4 [4]\n\nloading: ZOnaz_cesar_magdalena\ntranslation: ZOnaz_cesar_magdalena\n[Slope, Aspect, Curvature] Execution started...\n\n[Slope, Aspect, Curvature] Parameters:\n\nGrid System: 38.218514; 5905x 10629y; 4786823.166857x 2406092.271357y\nElevation: ZOnaz_cesar_magdalena\nSlope: Slope\nAspect: <not set>\nNorthness: <not set>\nEastness: <not set>\nGeneral Curvature: <not set>\nProfile Curvature: <not set>\nPlan Curvature: <not set>\nTangential Curvature: <not set>\nLongitudinal Curvature: <not set>\nCross-Sectional Curvature: <not set>\nMinimal Curvature: <not set>\nMaximal Curvature: <not set>\nTotal Curvature: <not set>\nFlow Line Curvature: <not set>\nMethod: 9 parameter 2nd order polynom (Zevenbergen & Thorne 1987)\nUnit: radians\nUnit: radians\n\n\ntotal execution time: 12000 milliseconds (12s)\n\n[Slope, Aspect, Curvature] Execution succeeded (12s)\nSaving grid: D:/DATOX/Agrarias/Pedo/procesos/slope.sgrd...\n```\n\n\n:::\n\n```{.r .cell-code}\nconvert_to_geotiff(slope_sgrd, slope_tiff)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\nSAGA Version: 9.7.2 (64 bit)\n\nlibrary path: C:\\PROGRA~1\\SAGA-9~1.2_X\\tools\\\nlibrary name: io_gdal\nlibrary     : GDAL/OGR\ntool        : Export GeoTIFF\nidentifier  : 2\nauthor      : O.Conrad (c) 2007\nprocessors  : 4 [4]\n\nLoading grid: D:/DATOX/Agrarias/Pedo/procesos/slope.sgrd...\n[Export GeoTIFF] Execution started...\n\n[Export GeoTIFF] Parameters:\n\nGrid System: 38.218514; 5905x 10629y; 4786823.166857x 2406092.271357y\nGrid(s): 1 object (slope)\nFile: D:/DATOX/Agrarias/Pedo/procesos/slope.tif\nCreation Options: \n\nBand 1\n\ntotal execution time: 4000 milliseconds (04s)\n\n[Export GeoTIFF] Execution succeeded (04s)\n```\n\n\n:::\n\n```{.r .cell-code}\n# Definir el directorio de salida donde se guardaron los archivos GeoTIFF\noutput_dir <- \"D:/DATOX/Agrarias/Pedo/procesos\"\n\n# Cargar los archivos GeoTIFF\nslope <- raster(file.path(output_dir, \"slope.tif\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cargar librerías necesarias\nlibrary(terra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nterra 1.7.78\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAdjuntando el paquete: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:terra':\n\n    intersect, union\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:raster':\n\n    intersect, select, union\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:plyr':\n\n    arrange, count, desc, failwith, id, mutate, rename, summarise,\n    summarize\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\n# Cargar el raster resultante\naspect_raster <- rast (\"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\procesos\\\\aspect.tif\")\n\nplot(aspect_raster, main = \"Aspect\")\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-2-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cargar librerías necesarias\nlibrary(terra)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Cargar el raster resultante\naspect_raster <- rast (\"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\procesos\\\\slope.tif\")\n\nplot(aspect_raster, main = \"Slope\")\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-3-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cargar librerías necesarias\nlibrary(terra)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Cargar el raster resultante\naspect_raster <- rast (\"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\PRECIP_ZE.tif\")\n\nplot(aspect_raster, main = \"Precipitacion_anual\")\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-4-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# -------------------\n# VISUALIZACIÓN EN R\n# -------------------\n\n# Cargar librerías necesarias\nlibrary(terra)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Cargar el raster resultante\naspect_raster <- rast(\"D:/DATOX/Agrarias/Pedo/NDVI_MAG_CES.tif\")\n\n# Definir la paleta de colores para NDVI\nndvi_colors <- colorRampPalette(c(\"brown\", \"yellow\", \"green\"))(100)\n\n# Visualizar el raster con título y paleta de colores NDVI\nplot(aspect_raster, col = ndvi_colors, main = \"NDVI\")\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-5-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# DEM_latitudes <- rast(DEM_raster)\n\nlibrary(terra)\n\n# Cargar el ráster de entrada\nDEM_raster <- rast(\"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\ZOnaz_cesar_magdalena.tif\")\n# Ruta de salida del nuevo ráster\nruta_salida <- \"D:/DATOX/Agrarias/Pedo/procesos/Procesos_1/DEM_LAT.tif\"\n\n# Obtener el número de filas y columnas del ráster\nn_filas <- nrow(DEM_raster)\nn_columnas <- ncol(DEM_raster)\n\n# Obtener el sistema de referencia de coordenadas (CRS) del ráster\ncrs_info <- crs(DEM_raster)\n\n# Mostrar información\nprint(paste(\"Número de filas:\", n_filas))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Número de filas: 10629\"\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(paste(\"Número de columnas:\", n_columnas))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Número de columnas: 5905\"\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(paste(\"CRS:\", crs_info))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"CRS: PROJCRS[\\\"MAGNA-SIRGAS_CMT12\\\",\\n    BASEGEOGCRS[\\\"MAGNA-SIRGAS\\\",\\n        DATUM[\\\"Marco Geocentrico Nacional de Referencia\\\",\\n            ELLIPSOID[\\\"GRS 1980\\\",6378137,298.257222101004,\\n                LENGTHUNIT[\\\"metre\\\",1]]],\\n        PRIMEM[\\\"Greenwich\\\",0,\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n        ID[\\\"EPSG\\\",4686]],\\n    CONVERSION[\\\"Transverse Mercator\\\",\\n        METHOD[\\\"Transverse Mercator\\\",\\n            ID[\\\"EPSG\\\",9807]],\\n        PARAMETER[\\\"Latitude of natural origin\\\",4,\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433],\\n            ID[\\\"EPSG\\\",8801]],\\n        PARAMETER[\\\"Longitude of natural origin\\\",-73,\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433],\\n            ID[\\\"EPSG\\\",8802]],\\n        PARAMETER[\\\"Scale factor at natural origin\\\",0.9992,\\n            SCALEUNIT[\\\"unity\\\",1],\\n            ID[\\\"EPSG\\\",8805]],\\n        PARAMETER[\\\"False easting\\\",5000000,\\n            LENGTHUNIT[\\\"metre\\\",1],\\n            ID[\\\"EPSG\\\",8806]],\\n        PARAMETER[\\\"False northing\\\",2000000,\\n            LENGTHUNIT[\\\"metre\\\",1],\\n            ID[\\\"EPSG\\\",8807]]],\\n    CS[Cartesian,2],\\n        AXIS[\\\"easting\\\",east,\\n            ORDER[1],\\n            LENGTHUNIT[\\\"metre\\\",1,\\n                ID[\\\"EPSG\\\",9001]]],\\n        AXIS[\\\"northing\\\",north,\\n            ORDER[2],\\n            LENGTHUNIT[\\\"metre\\\",1,\\n                ID[\\\"EPSG\\\",9001]]]]\"\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(DEM_raster)\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\n# Proyectar el DEM al sistema de coordenadas geográficas (EPSG:4623)\nDEM_proyectado <- project(DEM_raster, 'EPSG:4623')\n\n# Ruta de salida del nuevo ráster proyectado\nruta_salida <- \"D:/DATOX/Agrarias/Pedo/procesos/Procesos_1/DEM_LAT_PROYECTADO.tif\"\n\n# Guardar el ráster proyectado en la ruta de salida\nwriteRaster(DEM_proyectado, \"D:/DATOX/Agrarias/Pedo/procesos/Procesos_1/DEM_LAT_PROYECTADO.tif\", overwrite=TRUE)\n\n# Confirmar la proyección del nuevo ráster\nprint(crs(DEM_proyectado))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"GEOGCRS[\\\"CSG67\\\",\\n    DATUM[\\\"Centre Spatial Guyanais 1967\\\",\\n        ELLIPSOID[\\\"International 1924\\\",6378388,297,\\n            LENGTHUNIT[\\\"metre\\\",1]]],\\n    PRIMEM[\\\"Greenwich\\\",0,\\n        ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n    CS[ellipsoidal,2],\\n        AXIS[\\\"geodetic latitude (Lat)\\\",north,\\n            ORDER[1],\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n        AXIS[\\\"geodetic longitude (Lon)\\\",east,\\n            ORDER[2],\\n            ANGLEUNIT[\\\"degree\\\",0.0174532925199433]],\\n    USAGE[\\n        SCOPE[\\\"Geodesy.\\\"],\\n        AREA[\\\"French Guiana - coastal area.\\\"],\\n        BBOX[3.43,-54.45,5.81,-51.61]],\\n    ID[\\\"EPSG\\\",4623]]\"\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(DEM_proyectado)\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-6-2.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\nDEM_raster_proj<- rast(\"D:/DATOX/Agrarias/Pedo/procesos/Procesos_1/DEM_LAT_PROYECTADO.tif\")\n\nn_filas <- nrow(DEM_proyectado)\nn_columnas <- ncol(DEM_proyectado)\n# Crear un nuevo ráster vacío con la misma geometría\nlat_raster <- DEM_raster_proj\n\n# Obtener la latitud del centro de cada fila\nlatitudes <- rep(seq(ymax(DEM_raster_proj), ymin(DEM_raster_proj), length.out = n_filas), each = n_columnas)\n\n# Asignar los valores de latitud al nuevo ráster\nvalues(lat_raster) <- latitudes\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cargar librerías necesarias\nlibrary(raster)\nlibrary(readxl)\n# Definir la ruta de la carpeta donde están los rásters\nruta_rasters <- \"D:/DATOX/Agrarias/Pedo/procesos/Raster/\"\n\n# Listar archivos raster en el directorio especificado\nlist_file <- list.files(path = ruta_rasters, pattern = \"\\\\.tif$\", full.names = TRUE, ignore.case = TRUE)\n\n# Verificar si se encontraron archivos\nif (length(list_file) > 0) {\n  \n  # Cargar todos los archivos raster en un solo objeto\n  raster_stack <- stack(list_file)\n  \n  # Visualizar los rasters cargados\n  plot(raster_stack)\n  \n} else {\n  message(\"No se encontraron archivos .tif en la carpeta especificada.\")\n}\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\n# Resumen estadístico de los datos\n\ndatos  <- read_excel(\"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\data_final_1.xlsx\")\nsummary(datos)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       ID            LATITUD          LONGITUD        ALTITUD         \n Min.   :   2.0   Min.   : 7.744   Min.   :-74.94   Length:919        \n 1st Qu.: 263.5   1st Qu.: 9.619   1st Qu.:-74.35   Class :character  \n Median : 507.0   Median :10.130   Median :-73.99   Mode  :character  \n Mean   : 513.9   Mean   : 9.944   Mean   :-73.98                     \n 3rd Qu.: 776.5   3rd Qu.:10.495   3rd Qu.:-73.61                     \n Max.   :1029.0   Max.   :11.321   Max.   :-72.90                     \n       pH               CO             FOS_DIS             CICA       \n Min.   : 3.838   Min.   : 0.0000   Min.   :  0.000   Min.   : 0.000  \n 1st Qu.: 5.400   1st Qu.: 0.2873   1st Qu.:  0.000   1st Qu.: 9.739  \n Median : 5.990   Median : 0.7908   Median :  0.000   Median :16.191  \n Mean   : 6.050   Mean   : 1.1861   Mean   :  2.764   Mean   :18.440  \n 3rd Qu.: 6.604   3rd Qu.: 1.4526   3rd Qu.:  0.000   3rd Qu.:25.673  \n Max.   :10.698   Max.   :54.7524   Max.   :300.000   Max.   :61.207  \n       Ca               Mg                  K                 B_T         \n Min.   : 0.010   Min.   :  0.00713   Min.   :0.003271   Min.   :  0.000  \n 1st Qu.: 3.892   1st Qu.:  1.16245   1st Qu.:0.139801   1st Qu.:  5.817  \n Median : 8.849   Median :  2.94201   Median :0.294417   Median : 14.220  \n Mean   :10.992   Mean   :  5.02733   Mean   :0.438936   Mean   : 18.025  \n 3rd Qu.:15.443   3rd Qu.:  6.84516   3rd Qu.:0.552177   3rd Qu.: 26.806  \n Max.   :78.457   Max.   :119.77511   Max.   :9.894780   Max.   :332.365  \n   ACI_INTER            SAL             SBASES             CE          \n Min.   : 0.0000   Min.   : 0.000   Min.   :  0.00   Min.   :  0.0000  \n 1st Qu.: 0.0000   1st Qu.: 0.000   1st Qu.: 60.66   1st Qu.:  0.0000  \n Median : 0.0000   Median : 0.000   Median : 88.63   Median :  0.0000  \n Mean   : 0.6879   Mean   : 9.562   Mean   : 74.68   Mean   :  0.6224  \n 3rd Qu.: 0.2901   3rd Qu.: 2.332   3rd Qu.:100.00   3rd Qu.:  0.0000  \n Max.   :45.8527   Max.   :99.336   Max.   :112.76   Max.   :101.4820  \n     S_RAS             S_PSI         \n Min.   :  0.000   Min.   :  0.0000  \n 1st Qu.:  0.000   1st Qu.:  0.0000  \n Median :  0.000   Median :  0.0000  \n Mean   :  2.553   Mean   :  4.5090  \n 3rd Qu.:  0.000   3rd Qu.:  0.0138  \n Max.   :205.448   Max.   :340.5535  \n```\n\n\n:::\n\n```{.r .cell-code}\n# Visualización de los datos\n#View(datos)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#revisamos los rasters de ka caroeta y extension y resolucion \n\n# Cargar librerías necesarias\nlibrary(raster)  \n\n# Definir la carpeta donde están los rásters\nruta_rasters <- \"D:/DATOX/Agrarias/Pedo/procesos/Raster_2/\"\n\n# Listar los archivos raster en la carpeta\nlist_file <- list.files(path = ruta_rasters, pattern = \"\\\\.tif$\", full.names = TRUE, ignore.case = TRUE)\n\n# Cargar los rásters individualmente\nraster_list <- lapply(list_file, raster)\n\n# Crear un data frame con la información de los rásters\nraster_info <- data.frame(\n  file = list_file,\n  res_x = sapply(raster_list, function(r) res(r)[1]),  # Resolución X\n  res_y = sapply(raster_list, function(r) res(r)[2]),  # Resolución Y\n  rows = sapply(raster_list, function(r) nrow(r)),     # Número de filas\n  cols = sapply(raster_list, function(r) ncol(r)),     # Número de columnas\n  extent = sapply(raster_list, function(r) as.character(extent(r))) # Extensión\n)\n\n# Mostrar la información de los rásters\nprint(raster_info)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                                 file\n1                 D:/DATOX/Agrarias/Pedo/procesos/Raster_2/aspect.tif\n2      D:/DATOX/Agrarias/Pedo/procesos/Raster_2/convergence_index.tif\n3              D:/DATOX/Agrarias/Pedo/procesos/Raster_2/hillshade.tif\n4           D:/DATOX/Agrarias/Pedo/procesos/Raster_2/NDVI_MAG_CES.tif\n5         D:/DATOX/Agrarias/Pedo/procesos/Raster_2/plan_curvature.tif\n6              D:/DATOX/Agrarias/Pedo/procesos/Raster_2/PRECIP_ZE.tif\n7      D:/DATOX/Agrarias/Pedo/procesos/Raster_2/profile_curvature.tif\n8                  D:/DATOX/Agrarias/Pedo/procesos/Raster_2/slope.tif\n9                D:/DATOX/Agrarias/Pedo/procesos/Raster_2/TMIN_ZE.tif\n10         D:/DATOX/Agrarias/Pedo/procesos/Raster_2/TTMAX_CES_MAG.tif\n11 D:/DATOX/Agrarias/Pedo/procesos/Raster_2/ZOnaz_cesar_magdalena.tif\n          res_x        res_y  rows cols\n1  3.821851e+01 3.821851e+01 10629 5905\n2  3.821851e+01 3.821851e+01 10629 5905\n3  3.821851e+01 3.821851e+01 10629 5905\n4  2.245788e-03 2.245788e-03  1637  919\n5  3.821851e+01 3.821851e+01 10629 5905\n6  1.932170e+03 3.865079e+03   100  100\n7  3.821851e+01 3.821851e+01 10629 5905\n8  3.821851e+01 3.821851e+01 10629 5905\n9  2.219616e+03 4.058402e+03    94   95\n10 1.506723e+03 1.952029e+03   100  100\n11 3.821851e+01 3.821851e+01 10629 5905\n                                                                            extent\n1                   extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n2                   extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n3                   extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n4  extent(-74.948689942302, -72.8848105770374, 7.67385831459101, 11.3502136148502)\n5                   extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n6    extent(522979.970592144, 716196.949182166, 858072.46902041, 1244580.39096919)\n7                   extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n8                   extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n9     extent(506184.95643979, 717048.44036208, 848788.590076905, 1230278.37021389)\n10  extent(553980.937835805, 704653.252832253, 1035075.49142315, 1230278.37021389)\n11                  extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#revision de extension y resolución \n\n# Cargar librerías necesarias\nlibrary(raster)  \n\n# Definir la carpeta donde están los rásters\nruta_rasters <- \"D:/DATOX/Agrarias/Pedo/procesos/Raster/\"\n\n# Listar los archivos raster en la carpeta\nlist_file <- list.files(path = ruta_rasters, pattern = \"\\\\.tif$\", full.names = TRUE, ignore.case = TRUE)\n\n# Cargar los rásters individualmente\nraster_list <- lapply(list_file, raster)\n\n# Crear un data frame con la información de los rásters\nraster_info <- data.frame(\n  file = list_file,\n  res_x = sapply(raster_list, function(r) res(r)[1]),  # Resolución X\n  res_y = sapply(raster_list, function(r) res(r)[2]),  # Resolución Y\n  rows = sapply(raster_list, function(r) nrow(r)),     # Número de filas\n  cols = sapply(raster_list, function(r) ncol(r)),     # Número de columnas\n  extent = sapply(raster_list, function(r) as.character(extent(r))) # Extensión\n)\n\n# Mostrar la información de los rásters\nprint(raster_info)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                          file    res_x\n1            D:/DATOX/Agrarias/Pedo/procesos/Raster/aspect.tif 38.21851\n2 D:/DATOX/Agrarias/Pedo/procesos/Raster/convergence_index.tif 38.21851\n3         D:/DATOX/Agrarias/Pedo/procesos/Raster/hillshade.tif 38.21851\n4    D:/DATOX/Agrarias/Pedo/procesos/Raster/plan_curvature.tif 38.21851\n5 D:/DATOX/Agrarias/Pedo/procesos/Raster/profile_curvature.tif 38.21851\n6             D:/DATOX/Agrarias/Pedo/procesos/Raster/slope.tif 38.21851\n     res_y  rows cols\n1 38.21851 10629 5905\n2 38.21851 10629 5905\n3 38.21851 10629 5905\n4 38.21851 10629 5905\n5 38.21851 10629 5905\n6 38.21851 10629 5905\n                                                          extent\n1 extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n2 extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n3 extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n4 extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n5 extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n6 extent(4786804.0576, 5012484.3836, 2406073.1621, 2812297.7489)\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cargar librerías necesarias\nlibrary(terra)\n\n# Definir la carpeta donde están los rásters\nruta_rasters <- \"D:/DATOX/Agrarias/Pedo/procesos/Raster_2/\"\n\n# Listar todos los archivos .tif en la carpeta\nlist_files <- list.files(path = ruta_rasters, pattern = \"\\\\.tif$\", full.names = TRUE, ignore.case = TRUE)\n\n# Seleccionar el ráster de referencia (TMIN_ZE) basado en el nombre\nref_file <- grep(\"TMIN_ZE\", list_files, value = TRUE)\nif (length(ref_file) == 0) stop(\"No se encontró el ráster de referencia TMIN_ZE.\")\n\n# Cargar el ráster de referencia\nref_raster <- rast(ref_file)\n\n# Inicializar lista para almacenar los rásters homogenizados\nraster_list_resampled <- list()\n\n# Procesar cada ráster\nfor (file in list_files) {\n  r <- rast(file)  # Cargar ráster\n  \n  # Si el CRS es diferente, reproyectar\n  if (crs(r) != crs(ref_raster)) {\n    r <- project(r, ref_raster)\n  }\n  \n  # Ajustar resolución y extensión\n  r_resampled <- resample(r, ref_raster, method = \"bilinear\")\n  \n  # Guardar en la lista\n  raster_list_resampled[[basename(file)]] <- r_resampled\n}\n\n# Crear carpeta para guardar los rásters homogenizados\noutput_folder <- \"D:/DATOX/Agrarias/Pedo/procesos/Raster_Homogeneizados/\"\ndir.create(output_folder, showWarnings = FALSE)\n\n# Guardar los rásters homogenizados\nfor (name in names(raster_list_resampled)) {\n  writeRaster(raster_list_resampled[[name]], paste0(output_folder, name), overwrite = TRUE)\n}\n\n# Crear un stack con los rásters homogenizados\nraster_stack <- rast(raster_list_resampled)\n\n# Visualizar los rásters homogenizados\nplot(raster_stack)\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1️ Cargar librerías necesarias\nlibrary(readxl)  # Para leer archivos Excel\nlibrary(sf)      # Para trabajar con datos espaciales\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLinking to GEOS 3.12.2, GDAL 3.9.3, PROJ 9.4.1; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\n# 2️ Leer el archivo Excel\nruta_excel <- \"D:\\\\DATOX\\\\Agrarias\\\\Pedo\\\\datos_sin.xlsx\"\ndata_excel <- read_excel(ruta_excel)\n\n# 3️ Revisar las primeras filas del dataset\nhead(data_excel)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 x 3\n     ID LATITUD LONGITUD\n  <dbl>   <dbl>    <dbl>\n1     2    10.9    -74.7\n2     3    10.7    -74.6\n3     4    10.8    -74.6\n4     5    10.9    -74.6\n5     6    10.9    -74.6\n6     7    10.7    -74.6\n```\n\n\n:::\n\n```{.r .cell-code}\n# 4️ Convertir a objeto sf\n# Asegúrate de cambiar 'longitude' y 'latitude' por los nombres correctos de tus columnas\ndata_sf <- st_as_sf(data_excel, coords = c(\"LONGITUD\", \"LATITUD\"), crs = 4326)  # WGS 84\n\n# 5⃣ Verificar que la conversión fue exitosa\nprint(data_sf)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 919 features and 1 field\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -74.9397 ymin: 7.744042 xmax: -72.89941 ymax: 11.32118\nGeodetic CRS:  WGS 84\n# A tibble: 919 x 2\n      ID             geometry\n * <dbl>          <POINT [°]>\n 1     2 (-74.72155 10.91669)\n 2     3 (-74.57554 10.73838)\n 3     4 (-74.55816 10.75973)\n 4     5 (-74.62472 10.92438)\n 5     6 (-74.61175 10.92547)\n 6     7 (-74.60884 10.74828)\n 7     8 (-74.63334 10.45279)\n 8     9 (-73.28056 10.78611)\n 9    10 (-74.63569 10.79051)\n10    11 (-74.58441 10.72555)\n# i 909 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(data_sf)  # Visualización rápida\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\n# 6️ Opcional: Guardar como un shapefile\n#st_write(data_sf, \"D:/DATOX/Agrarias/Pedo/procesos/data_final.shp\", delete_layer = TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(terra)\nlibrary(sf)\nlibrary(viridis)  # Para una mejor paleta de colores\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCargando paquete requerido: viridisLite\n```\n\n\n:::\n\n```{.r .cell-code}\n# Cargar el DEM\nDEM <- rast(\"D:/DATOX/Agrarias/Pedo/procesos/Raster_Homogeneizados/ZOnaz_cesar_magdalena.tif\")\n\n# Cargar el shapefile\ndatos_sf <- st_read(\"D:/DATOX/Agrarias/Pedo/procesos/datos_finaV.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `datos_finaV' from data source \n  `D:\\DATOX\\Agrarias\\Pedo\\procesos\\datos_finaV.shp' using driver `ESRI Shapefile'\nSimple feature collection with 919 features and 1 field\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -74.9397 ymin: 7.744042 xmax: -72.89941 ymax: 11.32118\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\n# Verificar y transformar CRS si es necesario\nif (st_crs(datos_sf) != crs(DEM)) {\n  datos_sf <- st_transform(datos_sf, crs(DEM))\n}\n\n# Ploteo del DEM con paleta tipo NDVI\nplot(DEM, col = viridis(100), main = \"Modelo de Elevación y datos\")\n\n# Agregar puntos en color rojo\nplot(vect(datos_sf), add = TRUE, col = \"red\", pch = 15, cex = 1)\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n:::\n",
    "supporting": [
      "EDA_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}